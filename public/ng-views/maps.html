<nav>
  <div class="section">
    <h6>
      COAXS
    </h6>
  </div>
  <div class="section">
    <h6 ng-click="baseToggle('view_overview')">
      Overview
    </h6>
  </div>
  <div class="section">
    <h6 ng-click="baseToggle('view_variants')">
      Variations
    </h6>
  </div>
  <div class="section">
    <h6 ng-click="baseToggle('view_stations')">
      Station Types
    </h6>
  </div>
  <div class="section">
    <h6 ng-click="baseToggle('view_freq')">
      Frequencies
    </h6>
  </div>
</nav>

<div class="topcol-l">
  <div class="topleft" style="background-color: #{{ targetFeature.properties.routes_route_color }}" ng-show="targetFeature.properties.altName">
    <h4>
      {{ targetFeature.properties.altName }}
      <i class="fa fa-times-circle-o pull-right" ng-click="updateTargetFeature(false)"></i>
    </h4>
    <div class="topinfo-body container">
      <h6>
        The {{ targetFeature.properties.altName }} runs along the {{ targetFeature.properties.corLonName }} corridor ({{ targetFeature.properties.corName }}).
        You last selected the  
        <span ng-show="targetFeature.properties.direction == 0">
          inbound 
        </span>
        <span ng-show="!targetFeature.properties.direction == 0">
          outbound 
        </span>
        portion of the route's path.
      </h6>

      <h6 ng-show="targetFeature.alternatives">
        There are {{ targetFeature.alternatives.length/2 }} alternatives along this corridor. They are: 
        <span ng-repeat="feature in targetFeature.alternatives">
          <span class="badge" style="color: #{{ feature.routes_route_color }};" ng-show="feature.direction == 0" ng-click="updateTargetFeature(feature)">
            {{ feature.altName }}
          </span>
        </span>
      </h6>
      
      <button class="btn btn-choose pull-right" type="button" 
              ng-if="scenario[targetFeature.properties.corName].route_id !== targetFeature.properties.route_id"
              ng-click="scenario[targetFeature.properties.corName].route_id = targetFeature.properties.route_id" 
              style="background-color: #{{ targetFeature.properties.routes_route_color }}">
        Use this path for the {{ targetFeature.properties.corLonName }} corridor
      </button>

      <button class="btn btn-choose pull-right" type="button" 
              ng-if="scenario[targetFeature.properties.corName].route_id == targetFeature.properties.route_id"
              style="background-color: #{{ targetFeature.properties.routes_route_color }}">
        <i class="fa fa-check"></i>
        Path selected
      </button>

    </div>
  </div>

  <div class="topleft saveAlt" ng-show="saveAlt">
    <h4>
      Save this Route {{ tabnav }} alternative
      <i class="fa fa-times-circle-o pull-right" ng-click="saveAlt=!saveAlt"></i>
    </h4>
    <div class="topinfo-body container">
      <h6 ng-if="scenario[tabnav].route_id">
        This alternative route variation is based off of the path for route {{ scenario[tabnav].route_id }}.
      </h6>
      <h6 ng-if="!scenario[tabnav].route_id">
        You have not selected a path from the available options for this route. To select a path variation, choose from the available variations on the underlying map.
      </h6>
      <h6>
        Your alternative for Route {{ tabnav }} has installed
        <span ng-if="scenario[tabnav].station == 0">
          traditional standard bus stops.
        </span>
        <span ng-if="scenario[tabnav].station == 1">
          bus stops enhanced with raised platforms.
        </span>
        <span ng-if="scenario[tabnav].station == 2">
          BRT bus stations that feature both raised platforms and preboarding fare purchasing
        </span>
        Peak frequencies along your alternative of Route {{ tabnav }} have been set to {{ scenario[tabnav].peak.min }}:{{ scenario[tabnav].peak.sec | integerLength }} between arrivals. Off-peak frequencies have been set to {{ scenario[tabnav].offpeak.min }}:{{ scenario[tabnav].offpeak.sec | integerLength }} between arrivals. Complete the field below to add this alternative to Route {{ tabnav }}.
      </h6>
      <div class="input-group">
        <input type="text" class="form-control" ng-model="scenario[tabnav].name" placeholder="Name your alternative for Route {{ tabnav }}...">
        <span class="input-group-btn">
          <button class="btn btn-savealt" type="button" 
            ng-if="!scenario[tabnav].name || !scenario[tabnav].route_id" 
            style="cursor:not-allowed" disabled>
            Save Alternative
          </button>
          <button class="btn btn-savealt" type="button" 
            ng-click="newVariant(tabnav); saveAlt=!saveAlt" 
            ng-if="scenario[tabnav].name && scenario[tabnav].route_id">
            Save Alternative
          </button>
        </span>
      </div>
    </div>
  </div>
</div>



<leaflet  center   = "center_left"
          defaults = "defaults_left"
          geojson  = "geojson_left"
          id       = "map_left"
          layers   = "layers_left"
          markers  = "markers_left"
          >
</leaflet>
<leaflet  center   = "center_right"
          defaults = "defaults_right"
          geojson  = "geojson_right"
          id       = "map_right"
          layers   = "layers_right"
          markers  = "markers_right"
          >
</leaflet>




<div class="basecol" ng-show="base.view_overview">
  <h4>
    <span ng-click="baseToggle('view_overview')">
      Overview of Current Properties
    </span>
  </h4>

  <div ng-include="'tabnav.html'"></div>
  
  <div class="col-xs-12 body">
    <h5 ng-show="scenario[tabnav].route_id">
      <span ng-click="test(layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base)">
        Route {{ layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base.altName }} variant along the {{ layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base.corLonName }} Corridor
      </span>
      
      <span class="badge" style="color: #{{ layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base.routes_route_color }}" 
            ng-click="updateTargetFeature(layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base)">
        View path on map
      </span>
    </h5>
    <span ng-show="!scenario[tabnav].route_id" style="color:red">
      <h5 ng-click="baseToggle('view_overview')">
        <i class="fa fa-exclamation-triangle"></i> No path selected for [tabnav]! 
        <span class="badge">Select a path variation on map.</span>
      </h5>
    </span>
    <h6 ng-click="baseToggle('view_stations')">
      <i class="fa fa-bus"></i> 
      Station type: 
        <span ng-if="scenario[tabnav].station == 0">
          Standard
        </span>
        <span ng-if="scenario[tabnav].station == 1">
          Raised Platform
        </span>
        <span ng-if="scenario[tabnav].station == 2">
          BRT Station
        </span>
      
    </h6>
    <h6 ng-click="baseToggle('view_freq')">
      <i class="fa fa-clock-o"></i> 
      Frequency: {{ scenario[tabnav].peak.min }}:{{ scenario[tabnav].peak.sec | integerLength }} Peak, 
      {{ scenario[tabnav].offpeak.min }}:{{ scenario[tabnav].offpeak.sec | integerLength }} Off-Peak
    </h6>
  </div>
</div>


<div class="basecol" ng-show="base.view_variants">
  <h4>
    <span ng-click="baseToggle('view_variants')">
      Variations
    </span>
  </h4>

  <div ng-include="'tabnav.html'"></div>
  
  <div class="col-xs-12 body">

    <h5 ng-show="scenario[tabnav].route_id">
      <span ng-click="test(layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base)">
        Route {{ layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base.altName }} variant along the {{ layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base.corLonName }} Corridor
      </span>
      
      <span class="badge" style="color: #{{ layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base.routes_route_color }}" 
            ng-click="updateTargetFeature(layers_left.geojson.proposed[scenario[tabnav].route_id][0].options.base)">
        View path on map
      </span>
    </h5>

    <span ng-show="!scenario[tabnav].route_id" style="color:red">
      <h5 ng-click="baseToggle('view_overview')">
        <i class="fa fa-exclamation-triangle"></i> No path selected for [tabnav]! 
        <span class="badge">Select a path variation on map.</span>
      </h5>
    </span>
    
    <h6 ng-click="baseToggle('view_stations')">
      <i class="fa fa-bus"></i> 
      Station type: 
        <span ng-if="scenario[tabnav].station == 0">
          Standard
        </span>
        <span ng-if="scenario[tabnav].station == 1">
          Raised Platform
        </span>
        <span ng-if="scenario[tabnav].station == 2">
          BRT Station
        </span>
      
    </h6>
    <h6 ng-click="baseToggle('view_freq')">
      <i class="fa fa-clock-o"></i> 
      Frequency: {{ scenario[tabnav].peak.min }}:{{ scenario[tabnav].peak.sec | integerLength }} Peak, 
      {{ scenario[tabnav].offpeak.min }}:{{ scenario[tabnav].offpeak.sec | integerLength }} Off-Peak
    </h6>

    <h5>
      User-created Variations
    </h5>
    <h6>
      A total of {{ variants[tabnav].length }} variations have been created for this route this session.
    </h6>

    <table class="table table-condensed table-hover" ng-show="variants[tabnav].length > 0">
      <thead>
        <tr>
          <th>Name</th>
          <th>Route Path</th>
          <th>Station Type</th>
          <th>Peak</th>
          <th>Off-Peak</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="variant in variants[tabnav]">
          <td>{{ variant.name }}</td>
          <td>{{ layers_left.geojson.proposed[variant.route_id][0].options.base.altName }}</td>
          <td>
            <span ng-if="variant.station == 0">
              Standard 
            </span>
            <span ng-if="variant.station == 1">
              Raised Platform  
            </span>
            <span ng-if="variant.station == 2">
              BRT Station 
            </span>
          </td>
          <td>
            {{ variant.peak.min }}:{{ variant.peak.sec | integerLength }}
          </td>
          <td>
            {{ variant.offpeak.min }}:{{ variant.offpeak.sec | integerLength }}
            <i class="fa fa-refresh pull-right" ng-click="scenario[tabnav] = variant"></i>
          </td>
        </tr>
      </tbody>
    </table>

  </div>
</div>


<div class="basecol" ng-show="base.view_stations">

  <h4>
    <span ng-click="baseToggle('view_stations')">
      Station Types
    </span>
    <i class="fa fa-bookmark-o pull-right" ng-click="saveAlt=!saveAlt"></i>
  </h4>

  <div ng-include="'tabnav.html'"></div>

  <div class="btn-group btn-group-justified">
    <label class="btn btn-success" ng-model="scenario[tabnav].station" btn-radio="0">
      <i class="fa fa-star"></i> 
      <i class="fa fa-star-o"></i> 
      <i class="fa fa-star-o"></i>
      <br>
      Normal
    </label>
    <label class="btn btn-success" ng-model="scenario[tabnav].station" btn-radio="1">
      <i class="fa fa-star"></i> 
      <i class="fa fa-star"></i> 
      <i class="fa fa-star-o"></i>
      <br>
      Platform
    </label>
    <label class="btn btn-success" ng-model="scenario[tabnav].station" btn-radio="2">
      <i class="fa fa-star"></i> 
      <i class="fa fa-star"></i> 
      <i class="fa fa-star"></i> 
      <br>
      BRT
    </label>
  </div>
</div>

<div class="basecol" ng-show="base.view_freq">
  <h4>
    <span ng-click="baseToggle('view_freq')">
      Frequencies
    </span>
    <i class="fa fa-bookmark-o pull-right" ng-click="saveAlt=!saveAlt"></i>
  </h4>

  <div ng-include="'tabnav.html'"></div>

  <div class="body">
    <div class="col-xs-6 body text-center">
      <h2>
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-lg btn-info timeAdjust" ng-click="subTime(tabnav, true, 'min')"><i class="fa fa-angle-down"></i></button>
        </div>

        <span>
          {{ scenario[tabnav].peak.min | integerLength }} : {{ scenario[tabnav].peak.sec | integerLength }} 
        </span>

        <div class="btn-group" role="group">
          <button type="button" class="btn btn-lg btn-info timeAdjust" ng-click="addTime(tabnav, true, 'min')"><i class="fa fa-angle-up"></i></button>
        </div>
      </h2>

      <h4>
        Peak
      </h4>
    </div>

    <div class="col-xs-6 body text-center">
      <h2>
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-lg btn-info timeAdjust" ng-click="subTime(tabnav, false, 'min')"><i class="fa fa-angle-down"></i></button>
        </div>

        <span>
          {{ scenario[tabnav].offpeak.min | integerLength }} : {{ scenario[tabnav].offpeak.sec | integerLength }} 
        </span>

        <div class="btn-group" role="group">
          <button type="button" class="btn btn-lg btn-info timeAdjust" ng-click="addTime(tabnav, false, 'min')"><i class="fa fa-angle-up"></i></button>
        </div>
      </h2>

      <h4>
        Off-Peak
      </h4>
    </div>
  </div>
</div>






<script type="text/ng-template" id="tabnav.html">
  <div class="btn-group btn-group-justified" role="group">
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-default" 
                            ng-click="setTabnav('BH')"
                            ng-class="tabnav == 'BH' ? 'btn-selected' : ''">
        BH
      </button>
    </div>
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-default" 
                            ng-click="setTabnav('HP')"
                            ng-class="tabnav == 'HP' ? 'btn-selected' : ''">
        HP
      </button>
    </div>
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-default" 
                            ng-click="setTabnav('HD')"
                            ng-class="tabnav == 'HD' ? 'btn-selected' : ''">
        HD
      </button>
    </div>
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-default" 
                            ng-click="setTabnav('CT')"
                            ng-class="tabnav == 'CT' ? 'btn-selected' : ''">
        CT
      </button>
    </div>
  </div>
</script>


